@using ClarifEye.Data.Enums
@model SurveyViewModel

<form asp-action="SubmitSurvey" asp-controller="Survey">
    @{
        int scaleIndex = 0;
        int yesNoIndex = 0;
    }

    <!-- FirstPart -->
    @for (int i = 0; i < Model.FirstPart.Count; i++, scaleIndex++)
    {
        <p>@Model.FirstPart[i].QuestionText</p>
        <input type="hidden" name="ScaleAnswers[@scaleIndex].QuestionId" value="@Model.FirstPart[i].ScaleQuestionId" />
        @foreach (var enumValue in Enum.GetValues<ScaleEnum>())
        {
            <label>@enumValue</label>
            <input type="radio" name="ScaleAnswers[@scaleIndex].Answer" value="@enumValue" />
        }
    }

    <!-- SecondPart -->
    @for (int i = 0; i < Model.SecondPart.Count; i++, scaleIndex++)
    {
        <p>@Model.SecondPart[i].QuestionText</p>
        <input type="hidden" name="ScaleAnswers[@scaleIndex].QuestionId" value="@Model.SecondPart[i].ScaleQuestionId" />
        @foreach (var enumValue in Enum.GetValues<ScaleEnum>())
        {
            <label>@enumValue</label>
            <input type="radio" name="ScaleAnswers[@scaleIndex].Answer" value="@enumValue" />
        }
    }

    <!-- ThirdPart -->
    @for (int i = 0; i < Model.ThirdPart.Count; i++, scaleIndex++)
    {
        <p>@Model.ThirdPart[i].QuestionText</p>
        <input type="hidden" name="ScaleAnswers[@scaleIndex].QuestionId" value="@Model.ThirdPart[i].ScaleQuestionId" />
        @foreach (var enumValue in Enum.GetValues<ScaleEnum>())
        {
            <label>@enumValue</label>
            <input type="radio" name="ScaleAnswers[@scaleIndex].Answer" value="@enumValue" />
        }
    }

    <!-- FourthPart (YesNo Questions) -->
    @for (int i = 0; i < Model.FourthPart.Count; i++, yesNoIndex++)
    {
        <p>@Model.FourthPart[i].QuestionText</p>
        <input type="hidden" name="YesNoAnswers[@yesNoIndex].QuestionId" value="@Model.FourthPart[i].YesNoQuestionId" />
        @foreach (var enumValue in Enum.GetValues<YesNoEnum>())
        {
            <label>@enumValue</label>
            <input type="radio" name="YesNoAnswers[@yesNoIndex].Answer" value="@enumValue" />
        }
    }
    <!-- FifthPart (MultipleChoice and one YesNo) -->
    <p>@Model.FifthPart.Item1.QuestionString</p>
    @for (int i = 0; i < Model.FifthPart.Item1.Choices.Count; i++)
    {
        <label>@Model.FifthPart.Item1.Choices.ToList()[i].AnswerString</label>
        <input type="radio" name="ChoiceAnswerIds" value="@Model.FifthPart.Item1.Choices.ToList()[i].MultipleChoiceQuestionId" />
    }

    <p>@Model.FifthPart.Item2.QuestionText</p>
    <input type="hidden" name="YesNoAnswers[@yesNoIndex].QuestionId" value="@Model.FifthPart.Item2.YesNoQuestionId" />
    @foreach (var enumValue in Enum.GetValues<YesNoEnum>())
    {
        <label>@enumValue</label>
        <input type="radio" name="YesNoAnswers[@yesNoIndex].Answer" value="@enumValue" />
    }
    @{
        yesNoIndex++; // Move to next index if more YesNo questions are added later
    }

    <button type="submit">Submit</button>
</form>
